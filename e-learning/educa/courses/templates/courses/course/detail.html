{% extends "base.html" %}

{% block title %}
  {{ object.title }}
{% endblock %}

{% block content %}
<div class="container mt-5">
  {% with subject=object.subject %}
    <h1 class="text-center">{{ object.title }}</h1>

    <div class="module mt-4">
      <h2>Overview</h2>
      <p>
        <a href="{% url 'course_list_subject' subject.slug %}" class="btn btn-link">
          {{ subject.title }}
        </a>
        <span>{{ object.modules.count }} modules</span><br>
        <span>Instructor: {{ object.owner.get_full_name }}</span>
      </p>
      
      <div class="course-overview">
        {{ object.overview|linebreaks }}
      </div>
      
      {% if request.user.is_authenticated %}
        <form action="{% url 'student_enroll_course' %}" method="post" class="mt-3">
          {{ enroll_form }}
          {% csrf_token %}
          <button type="submit" class="btn btn-success">Enroll now</button>
        </form>
      {% else %}
        <a href="{% url 'student_registration' %}" class="btn btn-primary mt-3">
          Register to enroll
        </a>
      {% endif %}
    </div>
  {% endwith %}
</div>
{% endblock %}
